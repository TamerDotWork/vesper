
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CSV File Upload and Preview</title>
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="../static/css/style.css">
 
    <link rel="icon" href="static/favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@1"></script>

</head>
<body>

    <div class="container">
        <header>
            <div class="row">
                <div class="col-md-2">
                    <div class="logo"><a href="/"><img src="static/logo.svg" alt=""></a></div>
                </div>
                <div class="col-md-2">
                    <nav class="center-head">
                      
                        <ul>
                            <li><a href="#">Home</a></li>
                            <li><a href="#">Pricing</a></li>
                            <li><a href="#">Support</a></li>
                            <li><a href="#">About</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-md-8">
                    <nav class="right-head">
                        <ul>
                
                            <li><a href="#">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.12 13.53C12.1 13.53 12.07 13.53 12.05 13.53C12.02 13.53 11.98 13.53 11.95 13.53C9.67998 13.46 7.97998 11.69 7.97998 9.51001C7.97998 7.29001 9.78998 5.48001 12.01 5.48001C14.23 5.48001 16.04 7.29001 16.04 9.51001C16.03 11.7 14.32 13.46 12.15 13.53C12.13 13.53 12.13 13.53 12.12 13.53ZM12 6.97001C10.6 6.97001 9.46998 8.11001 9.46998 9.50001C9.46998 10.87 10.54 11.98 11.9 12.03C11.93 12.02 12.03 12.02 12.13 12.03C13.47 11.96 14.52 10.86 14.53 9.50001C14.53 8.11001 13.4 6.97001 12 6.97001Z" fill="#3A3A3A"/>
<path d="M12 22.75C9.30996 22.75 6.73996 21.75 4.74996 19.93C4.56996 19.77 4.48996 19.53 4.50996 19.3C4.63996 18.11 5.37996 17 6.60996 16.18C9.58996 14.2 14.42 14.2 17.39 16.18C18.62 17.01 19.36 18.11 19.49 19.3C19.52 19.54 19.43 19.77 19.25 19.93C17.26 21.75 14.69 22.75 12 22.75ZM6.07996 19.1C7.73996 20.49 9.82996 21.25 12 21.25C14.17 21.25 16.26 20.49 17.92 19.1C17.74 18.49 17.26 17.9 16.55 17.42C14.09 15.78 9.91996 15.78 7.43996 17.42C6.72996 17.9 6.25996 18.49 6.07996 19.1Z" fill="#3A3A3A"/>
<path d="M12 22.75C6.07 22.75 1.25 17.93 1.25 12C1.25 6.07 6.07 1.25 12 1.25C17.93 1.25 22.75 6.07 22.75 12C22.75 17.93 17.93 22.75 12 22.75ZM12 2.75C6.9 2.75 2.75 6.9 2.75 12C2.75 17.1 6.9 21.25 12 21.25C17.1 21.25 21.25 17.1 21.25 12C21.25 6.9 17.1 2.75 12 2.75Z" fill="#3A3A3A"/>
</svg>
</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        
        <main>

            <div class="row">
                
                <div class="col-md-2 sidebar">
                    <strong>Quick Actions</strong>
                    <ul>
                        <li><a href="/">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M22 9.75C21.59 9.75 21.25 9.41 21.25 9V7C21.25 4.42 19.58 2.75 17 2.75H7C4.42 2.75 2.75 4.42 2.75 7V9C2.75 9.41 2.41 9.75 2 9.75C1.59 9.75 1.25 9.41 1.25 9V7C1.25 3.56 3.56 1.25 7 1.25H17C20.44 1.25 22.75 3.56 22.75 7V9C22.75 9.41 22.41 9.75 22 9.75Z" fill="white"/>
<path d="M17 22.75H7C3.56 22.75 1.25 20.44 1.25 17V15C1.25 14.59 1.59 14.25 2 14.25C2.41 14.25 2.75 14.59 2.75 15V17C2.75 19.58 4.42 21.25 7 21.25H17C19.58 21.25 21.25 19.58 21.25 17V15C21.25 14.59 21.59 14.25 22 14.25C22.41 14.25 22.75 14.59 22.75 15V17C22.75 20.44 20.44 22.75 17 22.75Z" fill="white"/>
<path d="M22 12.75H2C1.59 12.75 1.25 12.41 1.25 12C1.25 11.59 1.59 11.25 2 11.25H22C22.41 11.25 22.75 11.59 22.75 12C22.75 12.41 22.41 12.75 22 12.75Z" fill="white"/>
</svg>
Upload</a></li>
                        <li><a href="/dashboard">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.5 20.5C4.33 21.33 5.67 21.33 6.5 20.5L19.5 7.5C20.33 6.67 20.33 5.33 19.5 4.5C18.67 3.67 17.33 3.67 16.5 4.5L3.5 17.5C2.67 18.33 2.67 19.67 3.5 20.5Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M18.01 8.98999L15.01 5.98999" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8.5 2.44L10 2L9.56 3.5L10 5L8.5 4.56L7 5L7.44 3.5L7 2L8.5 2.44Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M4.5 8.44L6 8L5.56 9.5L6 11L4.5 10.56L3 11L3.44 9.5L3 8L4.5 8.44Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M19.5 13.44L21 13L20.56 14.5L21 16L19.5 15.56L18 16L18.44 14.5L18 13L19.5 13.44Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
Explore</a></li>
                        <li><a href="/dashboard">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.89999 17H18.09C19.99 17 20.99 16 20.99 14.1V2H2.98999V14.1C2.99999 16 3.99999 17 5.89999 17Z" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2 2H22" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8 22L12 20V17" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M16 22L12 20" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.5 11L10.65 8.37C10.9 8.16 11.23 8.22 11.4 8.5L12.6 10.5C12.77 10.78 13.1 10.83 13.35 10.63L16.5 8" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
Insights</a></li>
                    </ul>
                    <hr>
                    <ul>
                        <li><a href="/">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2 12.88V11.12C2 10.08 2.85 9.22 3.9 9.22C5.71 9.22 6.45 7.94 5.54 6.37C5.02 5.47 5.33 4.3 6.24 3.78L7.97 2.79C8.76 2.32 9.78 2.6 10.25 3.39L10.36 3.58C11.26 5.15 12.74 5.15 13.65 3.58L13.76 3.39C14.23 2.6 15.25 2.32 16.04 2.79L17.77 3.78C18.68 4.3 18.99 5.47 18.47 6.37C17.56 7.94 18.3 9.22 20.11 9.22C21.15 9.22 22.01 10.07 22.01 11.12V12.88C22.01 13.92 21.16 14.78 20.11 14.78C18.3 14.78 17.56 16.06 18.47 17.63C18.99 18.54 18.68 19.7 17.77 20.22L16.04 21.21C15.25 21.68 14.23 21.4 13.76 20.61L13.65 20.42C12.75 18.85 11.27 18.85 10.36 20.42L10.25 20.61C9.78 21.4 8.76 21.68 7.97 21.21L6.24 20.22C5.33 19.7 5.02 18.53 5.54 17.63C6.45 16.06 5.71 14.78 3.9 14.78C2.85 14.78 2 13.92 2 12.88Z" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
Config</a></li>
                    </ul>
                    <p class="copyrights">© 2025 Iceberg. All rights reserved.</p>
                </div>
                <div class="col-md-10">
                      
                   <div class="wrapper">
    
<div class="col12">
<div class="col8">
<div class="cta-inner">
<small>Dataset name</small>
<h2 id="dataset_name"></h2>
<p>Upload your raw data and let AI automatically clean missing values, fix formatting issues, standardize columns, and generate insights — instantly and accurately</p>
<button id="open-upload-modal" class="btn-primary"  type="button" >
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M18.07 8.51001L9.50999 4.23001C3.75999 1.35001 1.39999 3.71001 4.27999 9.46001L5.14999 11.2C5.39999 11.71 5.39999 12.3 5.14999 12.81L4.27999 14.54C1.39999 20.29 3.74999 22.65 9.50999 19.77L18.07 15.49C21.91 13.57 21.91 10.43 18.07 8.51001ZM14.84 12.75H9.43999C9.02999 12.75 8.68999 12.41 8.68999 12C8.68999 11.59 9.02999 11.25 9.43999 11.25H14.84C15.25 11.25 15.59 11.59 15.59 12C15.59 12.41 15.25 12.75 14.84 12.75Z" fill="#333333"/>
</svg>Fix</button>
</div>
</div>
<div class="col4">
        <div class="card-dark">
        <div class="head"><div class="title">Total Quality Score</div></div>
            <div class="chart">
                <div>
                <canvas id="qualityScoreChart" height="50"></canvas>

                </div>
            </div>
            <div class="middle">
            <div class="col12">
                <div class="col4"><div class=" "><strong id="row_count"></strong></div><div class=" "><span>Total Rows</span></div></div>
                <div class="col4"><div class=" "><strong id="most_frequent_type">Int64</strong></div><div class=" "><span>Most frequent type</span></div></div>
                <div class="col4"><div class=" "><strong id="column_count"></strong></div><div class=" "><span>Tatal Columns</span></div></div>
            </div>
            </div>
    <div class="foot"></div>
    </div>

</div>
</div>
<div class="col12">
<div class="col8">
    <div class="card">
    <div class="head"><div class="title">Preview</div><div class="legend">555 Cols</div></div>
    <div class="chart"></div>
    <div class="foot"><div class="note">Normalization</div><div class="action"><a href="#" class="tag high">High</a></div></div>
    </div>
</div>
<div class="col4">
    <div class="col12">
<div class="col6">
    <div class="card">
<div class="head"><div class="title">Duplicate rows</div><div class="legend"><span id="duplicates-val"></span> Rows</div></div>
            <div class="chart"><canvas id="duplicateChart" height="50"></canvas></div>
            <div class="foot"><div class="note">Normalization</div><div class="action"><a href="#" class="tag high">High</a></div></div>
        </div>
</div>
<div class="col6">
    <div class="card">
<div class="head"><div class="title">Missing values</div><div class="legend"><span id="missing-val"></span> Cols</div></div>
    <div class="chart "><canvas id="missingChart" height="50"></canvas></div>
            <div class="foot"><div class="note">Normalization</div><div class="action"><a href="#" class="tag high">High</a></div></div>
        </div>
</div>
    </div>

    
    <div class="col12">
<div class="col6">
    <div class="card">
<div class="head"><div class="title">Distribution</div><div class="legend">555 Cols</div></div>
    <div class="chart">
    <canvas id="skewnessChart" ></canvas>
    </div>
    <div class="foot"><div class="note">Normalization</div><div class="action"><a href="#" class="tag high">High</a></div></div>
        </div>
</div>
<div class="col6">
    <div class="card">
<div class="head"><div class="title">Correlation</div><div class="legend">555 Cols</div></div>
    <div class="chart">
    <canvas id="correlationHeatmap"  ></canvas>

    </div>
            <div class="foot"><div class="note">Normalization</div><div class="action"><a href="#" class="tag high">High</a></div></div>
        </div>
</div>
    </div>


    <div class="col12">
<div class="col4">
    <div class="card">
<div class="head"><div class="title">Normalization</div></div>
            <div class="chart"><span id="normalization-val"></span></div>
            <div class="foot"><div class="note">Normalization</div><div class="action"><a href="#" class="tag high">High</a></div></div>
        </div>
</div>
<div class="col4">
    <div class="card">
<div class="head"><div class="title">PII</div></div>
            <div class="chart"><span id="pii-val"></span></div>
       
            <div class="foot"><div class="note">Normalization</div><div class="action"><a href="#" class="tag high">High</a></div></div>
        </div>
</div>
    <div class="col4">
        <div class="card">
            <div class="head"><div class="title">Invalid</div></div>
            <div class="chart"><span id="invalid-val"></span></div>
            <div class="foot"><div class="note">Normalization</div><div class="action"><a href="#" class="tag high">High</a></div></div>
        </div>
    </div>
    </div>
</div>
</div>
                   </div>

                </div>
            </div>
            
        </main>
     
    </div>



 

    <script src="static/js/jquery-3.6.0.min.js"></script>
    <!-- Logic Script -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // 1. Retrieve Data
            const rawData = sessionStorage.getItem('dqResult');
            
            // if (!rawData) {
            //     alert("No data found. Redirecting to upload.");
            //     window.location.href = "/";
            //     return;
            // }

            const data = JSON.parse(rawData);
            const scans = data.scans;
            
            $("#most_frequent_type").html(scans.schema.most_common_dtype.dtype);
            $("#missing-val").html(scans.missing.total_missing);
            $("#duplicates-val").html(scans.duplicates.duplicate_count);
            $("#row_count").html(data.row_count);
            $("#column_count").html(data.column_count); 
            $("#dataset_name").html(data.dataset_name);


            $("#normalization-val").html(scans.invalid.total_invalid);
            $("#pii-val").html(scans.invalid.total_invalid);
            $("#invalid-val").html(scans.invalid.total_invalid);
             
            console.log(data);  
 
 
 // Extract skewness
const skewValues = data.scans.skewness.skew_values;
const skewLabels = Object.keys(skewValues);
const skewData = Object.values(skewValues);

// Skewness chart
new Chart(document.getElementById("skewnessChart"), {
    type: 'bar',
    data: {
        labels: skewLabels,
        datasets: [{
            label: 'Skewness Value',
            data: skewData,
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
         plugins: {
            legend: { display: false },
            tooltip: { enabled: false }
        },
       scales: {
            x: { display: false },
            y: { display: false }
        }
    }
});
// Extract metrics dynamically
const totalQualityScore = data.scans.quality_score.score;
const duplicateRows = data.scans.duplicates.duplicate_count;
const missingValues = data.scans.missing.total_missing;
 

// Common doughnut options (minimal)
const minimalOptions = {
    responsive: true,
    plugins: { legend: { display: false }, tooltip: { enabled: false } },
    cutout: '70%'
};

// Quality Score Doughnut
new Chart(document.getElementById("qualityScoreChart"), {
    type: 'doughnut',
    data: {
        labels: ['Score', 'Remaining'],
        datasets: [{
            data: [totalQualityScore, 100 - totalQualityScore],
            backgroundColor: ['#28a745', '#e9ecef']
        }]
    },
    options: minimalOptions
});

// Duplicate Rows Doughnut
new Chart(document.getElementById("duplicateChart"), {
    type: 'doughnut',
    data: {
        labels: ['Duplicates', 'Remaining'],
        datasets: [{
            data: [duplicateRows, data.row_count - duplicateRows], // total rows = 500
            backgroundColor: ['#ffc107', '#e9ecef']
        }]
    },
    options: minimalOptions
});

// Missing Values Doughnut
new Chart(document.getElementById("missingChart"), {
    type: 'doughnut',
    data: {
        labels: ['Missing', 'Remaining'],
        datasets: [{
            data: [missingValues, data.row_count - missingValues], // total rows = 500
            backgroundColor: ['#dc3545', '#e9ecef']
        }]
    },
    options: minimalOptions
});

 
 
        });

 

 
    </script>
 


 
<script>
     

   
</script>

</body>
</html>